{"version":3,"file":"commonHelpers.js","sources":["../src/js/index.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '23089683-10e6383e94187ff47334541d4';\nconst URL_PARAMS = {\n  key: '',\n  page: 1,\n  per_page: 40,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  q: '',\n};\n\nconst refs = {\n  input: document.querySelector('input'),\n  button: document.querySelector('button'),\n  gallery: document.querySelector('.gallery'),\n  loadMore: document.querySelector('.load-more'),\n};\n\nrefs.input.addEventListener('input', onInputChange);\nrefs.button.addEventListener('click', onClickButton);\nrefs.loadMore.addEventListener('click', onLoadMoreClick);\n\nlet value = '';\n\n// refs.loadMore.classList.add('hide');\n\nfunction onInputChange(e) {\n  e.preventDefault();\n  value = e.target.value.trim();\n}\n\nfunction onClickButton(e) {\n  e.preventDefault();\n  refs.gallery.innerHTML = '';\n  if (value.length === 0) {\n    refs.input.value = '';\n    return iziToast.info({\n      message: 'You should enter something to input!',\n    });\n  }\n  fetchImages(value);\n}\n\nasync function fetchImages(value) {\n  try {\n    const { data } = await axios(\n      createURL(BASE_URL, API_KEY, URL_PARAMS, value)\n    );\n    createMarkup(data);\n    checkHitsNumber(data);\n  } catch (error) {\n    return iziToast.error({\n      message: 'Something went wrong :-( try again later.',\n    });\n  }\n}\n\nfunction createURL(url, api, params, value) {\n  return (\n    url +\n    '?' +\n    Object.keys(params)\n      .map(paramsKey => {\n        switch (paramsKey) {\n          case 'key':\n            return paramsKey.concat('=', api);\n          case 'q':\n            return paramsKey.concat('=', value);\n          default:\n            return paramsKey.concat('=', params[paramsKey]);\n        }\n      })\n      .join('&')\n  );\n}\n\nfunction createMarkup(data) {\n  const { hits } = data;\n  if (hits.length === 0) {\n    return iziToast.info({\n      message:\n        'Sorry, there are no images matching your search query. Please try again.',\n    });\n  }\n  hits.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      const imgMarkup = `\n        <div class=\"photo-card\">\n          <img src=${webformatURL} alt=${tags} loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b>\n              <span>${numberWithSpaces(likes)}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b>\n              <span>${numberWithSpaces(views)}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b>\n              <span>${numberWithSpaces(comments)}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b>\n              <span>${numberWithSpaces(downloads)}</span>\n            </p>\n          </div>\n        </div>`;\n      refs.gallery.insertAdjacentHTML('beforeend', imgMarkup);\n    }\n  );\n}\n\nfunction numberWithSpaces(num) {\n  return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n}\n\nfunction onLoadMoreClick(e) {\n  e.preventDefault();\n  // const pageCount =\n  URL_PARAMS.page += 1;\n  fetchImages(value);\n}\n\nfunction checkHitsNumber(data) {\n  const { hits, totalHits } = data;\n  console.log(data);\n  if (hits.length <= URL_PARAMS.per_page) {\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    refs.loadMore.classList.remove('hide');\n  }\n\n  // if (hits.length > 11) {\n  //   refs.loadMoreBtn.style.visibility = 'visible';\n  // } else {\n  //   refs.loadMoreBtn.style.visibility = 'hidden';\n  //   showAlert();\n  // }\n}\n"],"names":["BASE_URL","API_KEY","URL_PARAMS","refs","onInputChange","onClickButton","onLoadMoreClick","value","e","iziToast","fetchImages","data","axios","createURL","createMarkup","checkHitsNumber","url","api","params","paramsKey","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgMarkup","numberWithSpaces","num","totalHits"],"mappings":"6vBAGA,MAAMA,EAAW,2BACXC,EAAU,qCACVC,EAAa,CACjB,IAAK,GACL,KAAM,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAG,EACL,EAEMC,EAAO,CACX,MAAO,SAAS,cAAc,OAAO,EACrC,OAAQ,SAAS,cAAc,QAAQ,EACvC,QAAS,SAAS,cAAc,UAAU,EAC1C,SAAU,SAAS,cAAc,YAAY,CAC/C,EAEAA,EAAK,MAAM,iBAAiB,QAASC,CAAa,EAClDD,EAAK,OAAO,iBAAiB,QAASE,CAAa,EACnDF,EAAK,SAAS,iBAAiB,QAASG,CAAe,EAEvD,IAAIC,EAAQ,GAIZ,SAASH,EAAcI,EAAG,CACxBA,EAAE,eAAc,EAChBD,EAAQC,EAAE,OAAO,MAAM,KAAI,CAC7B,CAEA,SAASH,EAAcG,EAAG,CAGxB,GAFAA,EAAE,eAAc,EAChBL,EAAK,QAAQ,UAAY,GACrBI,EAAM,SAAW,EACnB,OAAAJ,EAAK,MAAM,MAAQ,GACZM,EAAS,KAAK,CACnB,QAAS,sCACf,CAAK,EAEHC,EAAYH,CAAK,CACnB,CAEA,eAAeG,EAAYH,EAAO,CAChC,GAAI,CACF,KAAM,CAAE,KAAAI,CAAM,EAAG,MAAMC,EACrBC,EAAUb,EAAUC,EAASC,EAAYK,CAAK,CACpD,EACIO,EAAaH,CAAI,EACjBI,EAAgBJ,CAAI,CACrB,MAAC,CACA,OAAOF,EAAS,MAAM,CACpB,QAAS,2CACf,CAAK,CACF,CACH,CAEA,SAASI,EAAUG,EAAKC,EAAKC,EAAQX,EAAO,CAC1C,OACES,EACA,IACA,OAAO,KAAKE,CAAM,EACf,IAAIC,GAAa,CAChB,OAAQA,EAAS,CACf,IAAK,MACH,OAAOA,EAAU,OAAO,IAAKF,CAAG,EAClC,IAAK,IACH,OAAOE,EAAU,OAAO,IAAKZ,CAAK,EACpC,QACE,OAAOY,EAAU,OAAO,IAAKD,EAAOC,EAAU,CACjD,CACT,CAAO,EACA,KAAK,GAAG,CAEf,CAEA,SAASL,EAAaH,EAAM,CAC1B,KAAM,CAAE,KAAAS,CAAM,EAAGT,EACjB,GAAIS,EAAK,SAAW,EAClB,OAAOX,EAAS,KAAK,CACnB,QACE,0EACR,CAAK,EAEHW,EAAK,IACH,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACN,IAAU,CACJ,MAAMC,EAAY;AAAA;AAAA,qBAEHP,SAAoBE;AAAA;AAAA;AAAA;AAAA,sBAInBM,EAAiBL,CAAK;AAAA;AAAA;AAAA;AAAA,sBAItBK,EAAiBJ,CAAK;AAAA;AAAA;AAAA;AAAA,sBAItBI,EAAiBH,CAAQ;AAAA;AAAA;AAAA;AAAA,sBAIzBG,EAAiBF,CAAS;AAAA;AAAA;AAAA,gBAI1CxB,EAAK,QAAQ,mBAAmB,YAAayB,CAAS,CACvD,CACL,CACA,CAEA,SAASC,EAAiBC,EAAK,CAC7B,OAAOA,EAAI,SAAU,EAAC,QAAQ,wBAAyB,GAAG,CAC5D,CAEA,SAASxB,EAAgBE,EAAG,CAC1BA,EAAE,eAAc,EAEhBN,EAAW,MAAQ,EACnBQ,EAAYH,CAAK,CACnB,CAEA,SAASQ,EAAgBJ,EAAM,CAC7B,KAAM,CAAE,KAAAS,EAAM,UAAAW,CAAW,EAAGpB,EAC5B,QAAQ,IAAIA,CAAI,EACZS,EAAK,QAAUlB,EAAW,SAC5BO,EAAS,KAAK,CACZ,QAAS,4DACf,CAAK,EAEDN,EAAK,SAAS,UAAU,OAAO,MAAM,CASzC"}